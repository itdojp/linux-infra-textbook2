<?xml version="1.0" encoding="UTF-8"?>
<svg width="500" height="400" viewBox="0 0 500 400" xmlns="http://www.w3.org/2000/svg">
  <title>実行時のコンテナ層構造</title>
  <desc>実行時の書き込み可能レイヤーと読み取り専用レイヤーの関係</desc>
  
  <defs>
    <style>
      .title { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif; font-size: 16px; font-weight: 600; fill: #1a1a1a; }
      .section-title { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif; font-size: 13px; font-weight: 600; fill: #333; }
      .layer-label { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif; font-size: 11px; font-weight: 500; fill: #333; }
      .description { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif; font-size: 10px; font-weight: 400; fill: #666; }
      .mechanism { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif; font-size: 9px; font-weight: 400; fill: #1976d2; }
      
      .writable-layer { fill: #ffcccc; stroke: #f44336; stroke-width: 2; rx: 6; }
      .readonly-layer { fill: #e6f3ff; stroke: #1976d2; stroke-width: 2; rx: 6; }
      
      .cow-arrow { stroke: #f44336; stroke-width: 2; fill: none; marker-end: url(#arrowhead-red); }
      .readonly-arrow { stroke: #1976d2; stroke-width: 2; stroke-dasharray: 5,5; fill: none; marker-end: url(#arrowhead-blue); }
    </style>
    
    <marker id="arrowhead-red" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#f44336" />
    </marker>
    <marker id="arrowhead-blue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#1976d2" />
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="500" height="400" fill="#ffffff"/>
  
  <!-- Title -->
  <text x="250" y="25" text-anchor="middle" class="title">実行時のコンテナ層構造</text>
  
  <!-- Container border -->
  <rect x="80" y="60" width="300" height="240" fill="none" stroke="#dee2e6" stroke-width="2" stroke-dasharray="10,5" rx="8"/>
  <text x="230" y="80" text-anchor="middle" class="section-title">実行時のコンテナ</text>
  
  <!-- Writable Layer -->
  <rect x="100" y="100" width="260" height="50" class="writable-layer"/>
  <text x="230" y="120" text-anchor="middle" class="layer-label">書き込み可能レイヤー</text>
  <text x="230" y="135" text-anchor="middle" class="description">コンテナ固有の変更</text>
  <text x="230" y="145" text-anchor="middle" class="description">ファイル作成・変更・削除</text>
  
  <!-- Read-only Layer 1 -->
  <rect x="100" y="170" width="260" height="40" class="readonly-layer"/>
  <text x="230" y="185" text-anchor="middle" class="layer-label">イメージレイヤー（読専）</text>
  <text x="230" y="200" text-anchor="middle" class="description">共有される</text>
  
  <!-- Read-only Layer 2 -->
  <rect x="100" y="220" width="260" height="40" class="readonly-layer"/>
  <text x="230" y="235" text-anchor="middle" class="layer-label">イメージレイヤー（読専）</text>
  <text x="230" y="250" text-anchor="middle" class="description">共有される</text>
  
  <!-- Read-only Layer 3 -->
  <rect x="100" y="270" width="260" height="40" class="readonly-layer"/>
  <text x="230" y="285" text-anchor="middle" class="layer-label">イメージレイヤー（読専）</text>
  <text x="230" y="300" text-anchor="middle" class="description">共有される</text>
  
  <!-- Copy-on-Write arrow -->
  <line x1="230" y1="150" x2="230" y2="170" class="cow-arrow"/>
  <text x="280" y="165" class="mechanism">Copy-on-Write</text>
  
  <!-- Read-only arrows -->
  <line x1="230" y1="210" x2="230" y2="220" class="readonly-arrow"/>
  <line x1="230" y1="260" x2="230" y2="270" class="readonly-arrow"/>
  
  <!-- Labels -->
  <text x="40" y="175" text-anchor="middle" class="mechanism">書込</text>
  <text x="40" y="235" text-anchor="middle" class="mechanism">読専</text>
  <text x="40" y="285" text-anchor="middle" class="mechanism">読専</text>
  
  <!-- Benefits box -->
  <rect x="50" y="330" width="400" height="50" fill="#e8f5e8" stroke="#4caf50" stroke-width="1" rx="4"/>
  <text x="60" y="345" class="layer-label">✅ Copy-on-Writeの利点:</text>
  <text x="60" y="360" class="description">• イメージレイヤーは複数コンテナで共有 • メモリ・ディスク使用量の最適化</text>
  <text x="60" y="375" class="description">• 変更時のみファイルをコピー • 高速な起動時間を実現</text>
</svg>