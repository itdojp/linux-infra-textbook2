<?xml version="1.0" encoding="UTF-8"?>
<svg width="900" height="700" viewBox="0 0 900 700" xmlns="http://www.w3.org/2000/svg">
  <title>DNSå•é¡Œã®ä½“ç³»çš„è¨ºæ–­æ‰‹é †</title>
  <desc>DNSå•é¡Œç™ºç”Ÿæ™‚ã®æ®µéšçš„ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ•ãƒ­ãƒ¼ãƒãƒ£ãƒ¼ãƒˆ</desc>
  
  <defs>
    <style>
      .title { font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; font-size: 16px; font-weight: 600; fill: #1a1a1a; }
      .step-label { font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; font-size: 11px; font-weight: 600; fill: #333; }
      .action-label { font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; font-size: 10px; font-weight: 400; fill: #1976d2; }
      .decision-label { font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; font-size: 10px; font-weight: 400; fill: #7b1fa2; }
      .command { font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', monospace; font-size: 9px; font-weight: 400; fill: #388e3c; }
      .result-ok { font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; font-size: 9px; font-weight: 400; fill: #2e7d32; }
      .result-ng { font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; font-size: 9px; font-weight: 400; fill: #d32f2f; }
      
      .start-node { fill: #ffebee; stroke: #f44336; stroke-width: 2; rx: 8; }
      .decision-node { fill: #f3e5f5; stroke: #9c27b0; stroke-width: 2; rx: 20; }
      .action-node { fill: #e3f2fd; stroke: #1976d2; stroke-width: 2; rx: 6; }
      .check-node { fill: #fff3e0; stroke: #ff9800; stroke-width: 2; rx: 6; }
      .solution-node { fill: #e8f5e8; stroke: #4caf50; stroke-width: 2; rx: 6; }
      
      .flow-arrow { stroke: #333; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .ok-flow { stroke: #4caf50; stroke-width: 2; fill: none; marker-end: url(#arrowhead-green); }
      .ng-flow { stroke: #f44336; stroke-width: 2; fill: none; marker-end: url(#arrowhead-red); }
    </style>
    
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333" />
    </marker>
    <marker id="arrowhead-green" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#4caf50" />
    </marker>
    <marker id="arrowhead-red" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#f44336" />
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="900" height="700" fill="#ffffff"/>
  
  <!-- Title -->
  <text x="450" y="30" text-anchor="middle" class="title">DNSå•é¡Œã®ä½“ç³»çš„è¨ºæ–­æ‰‹é †</text>
  
  <!-- Start -->
  <rect x="380" y="60" width="140" height="50" class="start-node"/>
  <text x="450" y="80" text-anchor="middle" class="step-label">ğŸš¨ DNSå•é¡Œç™ºç”Ÿ</text>
  <text x="450" y="95" text-anchor="middle" class="action-label">åå‰è§£æ±ºã§ããªã„</text>
  
  <!-- Step 1: Basic connectivity -->
  <ellipse cx="450" cy="160" rx="70" ry="30" class="decision-node"/>
  <text x="450" y="155" text-anchor="middle" class="step-label">åŸºæœ¬çš„ãª</text>
  <text x="450" y="168" text-anchor="middle" class="step-label">æ¥ç¶šç¢ºèª</text>
  
  <!-- Step 1 OK: Name resolution test -->
  <rect x="200" y="230" width="140" height="60" class="action-node"/>
  <text x="270" y="250" text-anchor="middle" class="step-label">åå‰è§£æ±ºãƒ†ã‚¹ãƒˆ</text>
  <text x="270" y="265" text-anchor="middle" class="command">nslookup/dig</text>
  <text x="270" y="280" text-anchor="middle" class="command">host/getent</text>
  
  <!-- Step 1 NG: Network check -->
  <rect x="560" y="230" width="140" height="60" class="check-node"/>
  <text x="630" y="250" text-anchor="middle" class="step-label">ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯</text>
  <text x="630" y="265" text-anchor="middle" class="step-label">æ¥ç¶šã‚’ç¢ºèª</text>
  <text x="630" y="280" text-anchor="middle" class="command">ping, traceroute</text>
  
  <!-- Step 2: DNS resolution result -->
  <ellipse cx="270" cy="350" rx="60" ry="25" class="decision-node"/>
  <text x="270" y="350" text-anchor="middle" class="step-label">è§£æ±ºçµæœ</text>
  
  <!-- Step 2 Success: Cache investigation -->
  <rect x="50" y="420" width="120" height="60" class="check-node"/>
  <text x="110" y="440" text-anchor="middle" class="step-label">ã‚­ãƒ£ãƒƒã‚·ãƒ¥å•é¡Œ</text>
  <text x="110" y="455" text-anchor="middle" class="step-label">å¯èƒ½æ€§ã‚’èª¿æŸ»</text>
  <text x="110" y="470" text-anchor="middle" class="command">systemd-resolve</text>
  
  <!-- Step 2 Fail: DNS server reachability -->
  <ellipse cx="270" cy="440" rx="70" ry="30" class="decision-node"/>
  <text x="270" y="435" text-anchor="middle" class="step-label">DNSã‚µãƒ¼ãƒãƒ¼</text>
  <text x="270" y="448" text-anchor="middle" class="step-label">åˆ°é”å¯èƒ½ï¼Ÿ</text>
  
  <!-- DNS server reachable: Config check -->
  <rect x="400" y="420" width="140" height="60" class="check-node"/>
  <text x="470" y="440" text-anchor="middle" class="step-label">DNSè¨­å®šç¢ºèª</text>
  <text x="470" y="455" text-anchor="middle" class="command">/etc/resolv.conf</text>
  <text x="470" y="470" text-anchor="middle" class="command">/etc/nsswitch.conf</text>
  
  <!-- DNS server unreachable: IP check -->
  <rect x="200" y="520" width="140" height="60" class="solution-node"/>
  <text x="270" y="540" text-anchor="middle" class="step-label">DNSã‚µãƒ¼ãƒãƒ¼IP</text>
  <text x="270" y="555" text-anchor="middle" class="step-label">ç¢ºèªãƒ»å¤‰æ›´</text>
  <text x="270" y="570" text-anchor="middle" class="command">8.8.8.8, 1.1.1.1</text>
  
  <!-- Authority server check -->
  <ellipse cx="470" cy="530" rx="70" ry="30" class="decision-node"/>
  <text x="470" y="525" text-anchor="middle" class="step-label">æ¨©å¨ã‚µãƒ¼ãƒãƒ¼</text>
  <text x="470" y="538" text-anchor="middle" class="step-label">å¿œç­”ç¢ºèª</text>
  
  <!-- Authority server OK: TTL/Cache -->
  <rect x="600" y="420" width="140" height="60" class="check-node"/>
  <text x="670" y="440" text-anchor="middle" class="step-label">TTL/ã‚­ãƒ£ãƒƒã‚·ãƒ¥</text>
  <text x="670" y="455" text-anchor="middle" class="step-label">å•é¡Œèª¿æŸ»</text>
  <text x="670" y="470" text-anchor="middle" class="command">dig +trace</text>
  
  <!-- Authority server NG: Server failure -->
  <rect x="400" y="600" width="140" height="60" class="solution-node"/>
  <text x="470" y="620" text-anchor="middle" class="step-label">æ¨©å¨ã‚µãƒ¼ãƒãƒ¼</text>
  <text x="470" y="635" text-anchor="middle" class="step-label">éšœå®³ç¢ºèª</text>
  <text x="470" y="650" text-anchor="middle" class="command">åˆ¥DNSã§ç¢ºèª</text>
  
  <!-- Final solution -->
  <rect x="600" y="520" width="140" height="60" class="solution-node"/>
  <text x="670" y="545" text-anchor="middle" class="step-label">âœ… è§£æ±ºç­–å®Ÿè£…</text>
  <text x="670" y="560" text-anchor="middle" class="action-label">å•é¡Œã‚’ä¿®æ­£</text>
  
  <!-- Flow arrows -->
  <line x1="450" y1="110" x2="450" y2="130" class="flow-arrow"/>
  
  <!-- From basic connectivity check -->
  <line x1="400" y1="170" x2="320" y2="240" class="ok-flow"/>
  <line x1="500" y1="170" x2="580" y2="240" class="ng-flow"/>
  
  <!-- From name resolution test -->
  <line x1="270" y1="290" x2="270" y2="325" class="flow-arrow"/>
  
  <!-- From resolution result -->
  <line x1="230" y1="365" x2="150" y2="420" class="ok-flow"/>
  <line x1="270" y1="375" x2="270" y2="410" class="ng-flow"/>
  
  <!-- From DNS server reachability -->
  <line x1="340" y1="450" x2="400" y2="450" class="ok-flow"/>
  <line x1="270" y1="470" x2="270" y2="520" class="ng-flow"/>
  
  <!-- From config check -->
  <line x1="470" y1="480" x2="470" y2="500" class="flow-arrow"/>
  
  <!-- From authority server check -->
  <line x1="540" y1="520" x2="620" y2="460" class="ok-flow"/>
  <line x1="470" y1="560" x2="470" y2="600" class="ng-flow"/>
  
  <!-- To final solution -->
  <line x1="670" y1="480" x2="670" y2="520" class="flow-arrow"/>
  
  <!-- Labels for flow conditions -->
  <text x="360" y="210" class="result-ok">OK</text>
  <text x="540" y="210" class="result-ng">NG</text>
  <text x="180" y="395" class="result-ok">æˆåŠŸ</text>
  <text x="275" y="395" class="result-ng">å¤±æ•—</text>
  <text x="365" y="435" class="result-ok">åˆ°é”å¯</text>
  <text x="275" y="495" class="result-ng">åˆ°é”ä¸å¯</text>
  <text x="585" y="485" class="result-ok">å¿œç­”ã‚ã‚Š</text>
  <text x="475" y="585" class="result-ng">å¿œç­”ãªã—</text>
  
  <!-- Command examples at bottom -->
  <rect x="50" y="600" width="800" height="80" fill="#f8f9fa" stroke="#dee2e6" stroke-width="1" rx="4"/>
  <text x="70" y="620" class="step-label">ğŸ› ï¸ ä¸»è¦ãªè¨ºæ–­ã‚³ãƒãƒ³ãƒ‰:</text>
  <text x="70" y="635" class="command">ping 8.8.8.8                    # åŸºæœ¬æ¥ç¶šç¢ºèª</text>
  <text x="70" y="650" class="command">nslookup example.com            # åå‰è§£æ±ºãƒ†ã‚¹ãƒˆ</text>
  <text x="70" y="665" class="command">dig @8.8.8.8 example.com        # ç‰¹å®šDNSã‚µãƒ¼ãƒãƒ¼ã§ãƒ†ã‚¹ãƒˆ</text>
  
  <text x="450" y="635" class="command">systemd-resolve --status        # DNSè¨­å®šç¢ºèª</text>
  <text x="450" y="650" class="command">dig +trace example.com          # æ¨©å¨ã‚µãƒ¼ãƒãƒ¼ã¾ã§è¿½è·¡</text>
  <text x="450" y="665" class="command">getent hosts example.com        # ã‚·ã‚¹ãƒ†ãƒ è¨­å®šã§ã®è§£æ±º</text>
</svg>